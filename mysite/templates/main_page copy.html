<!-- 
    https://codepen.io/pen?&prefill_data_id=dc3307a3-3589-437f-b114-086460e8db3a
 -->
<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Crowd Counting</title>
    <link rel="stylesheet" href="{% static 'css/main_page.css' %}" />
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script
      src="https://cdn.plot.ly/plotly-2.30.0.min.js"
      charset="utf-8"
    ></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/css-element-queries/1.2.3/ResizeSensor.js"></script>

    <link
      href="{% static 'node_modules/gridstack/dist/gridstack.min.css' %}"
      rel="stylesheet"
    />
    <script src="{% static 'node_modules/gridstack/dist/gridstack-all.js' %}"></script>

    <script>
      $(function () {
        $("#file_upload").click(function () {
          $("#video_file").click();
        });

        $("#video_file").change(function () {
          $("form").submit();
        });

        $("#video_start").click(function () {
          $.get("/proxy/8000/start", function () {});
        });

        $("#graph1").width($(".bottom").width());
        $("#graph1").height($(".bottom").height());
      });
    </script>
  </head>

  <body>
    <header>
      <form
        action="/proxy/8000/upload/"
        method="post"
        enctype="multipart/form-data"
      >
        <input type="file" name="video" hidden id="video_file" />
        <label for="file"
          ><button type="button" id="file_upload">Upload</button></label
        >
      </form>

      <button id="video_start">Strat</button>
      <button id="video_start">Setting</button>
      <button id="video_start">Reset</button>
    </header>
    <div class="content">
      <div class="grid-stack">
        <div class="grid-stack-item" gs-w="6" gs-h="3">
          <div class="grid-stack-item-content item">
            <div class="video">
              <img src="../../static/dummy.jpg" style="width: 100%" />
              <img src="/proxy/8000/video_stream" alt="" />
            </div>
          </div>
        </div>
        <div class="grid-stack-item" gs-w="6" gs-h="3">
          <div class="grid-stack-item-content item">
            <div class="rGraph">
              <div id="drawGraph"></div>
            </div>
          </div>
        </div>
        <div class="grid-stack-item" gs-w="12" gs-h="6">
          <div class="grid-stack-item-content item">
            <div id="bGraph"></div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="{% static 'js/draw_graph.js' %}"></script>
    <script type="module" src="{% static 'js/ui_control.js' %}"></script>
    <script></script>
  </body>
</html>
